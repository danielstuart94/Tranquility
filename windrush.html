<!doctype html><html lang="en"><head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tqind — Windrush Square, Brixton</title><link rel="stylesheet" href="styles.css" /></head>
<body data-location="Windrush Square, Brixton, London" data-rain="false" data-aq="60" data-amenities="50"><div class="container">
<nav><div class="brandRow"><img src="logo.png" alt="Tqind" style="height:32px;width:32px;border-radius:9999px;" /><div class="brandName">Tqind</div></div><div><a class="btn" href="home.html">Back</a></div></nav>
<section class="hero">
  <div class="badge" id="statusBadge"><span id="statusLabel">–</span> <span class="sub" id="statusScore"></span></div>
  <div class="guidance" id="guidanceText">Checking conditions…</div>
  <div class="chips" id="chipRow"></div>
  <a class="maplink" target="_blank" href="https://www.google.com/maps/search/?api=1&query=Windrush%20Square%2C%20Brixton%2C%20London">View on Google Maps</a>
  <p>Windrush Square, Brixton • hour‑by‑hour tranquillity (next 24h). Predicted score remains fixed. Adjust assumptions below to compare.</p>
</section>
<div class="twoCol">
  <div class="card">
    <h3>24‑hour forecast</h3>
    <div class="chartWrap">
      <div class="yTicks"></div>
      <svg id="chart" viewBox="0 0 1000 220" preserveAspectRatio="none">
        <polyline id="line" fill="none" stroke="var(--brand)" stroke-width="3" points=""/>
      </svg>
      <div class="gridCols" id="chartLabels"></div>
    </div>
    <div class="small">Evening adjustment is applied automatically after 19:00.</div>
    <details id="breakdown" open>
      <summary>See breakdown</summary>
      <div id="breakdownRows" class="small"></div>
    </details>
    <details id="assumptionsData" open>
      <summary>See assumptions used</summary>
      <div class="small" id="assumptionRows"></div>
    </details>
  </div>

  <div class="card" id="controls">
    <h3>Assumptions</h3>
    <div class="miniBadge"><span id="userStatusLabel">Your adjusted:</span> <span class="sub" id="userStatusScore">–</span></div>
    <details id="assumptions" open>
      <summary>Adjust assumptions</summary>
      <div class="small">These sliders are inputs, not the predicted score.</div>
      <label>Noise (dB proxy, lower is better)</label><input id="noise" type="range" min="0" max="100" value="55" />
<label>Crowd density</label><input id="crowd" type="range" min="0" max="100" value="60" />
<label>Shade / microclimate</label><input id="shade" type="range" min="0" max="100" value="35" />
<label>Greenery / planting</label><input id="green" type="range" min="0" max="100" value="35" />
<label>Temperature comfort</label><input id="temp" type="range" min="0" max="100" value="52" />
    </details>
    <hr />
    <h3>Is this about right?</h3>
    <label><input type="radio" name="aboutRight" value="Yes" checked> Yes</label>
    <label><input type="radio" name="aboutRight" value="No"> No</label>
    <label>Comments</label><textarea id="comments" placeholder="What feels off or spot on?"></textarea>
    <button id="sendFeedback">Send feedback</button>
    <div id="feedbackStatus" class="small" style="margin-top:8px;"></div>
  </div>
</div>
<footer>© 2025 Tqind</footer></div>

<script>
const WEIGHTS = { noise:0.22, crowd:0.14, shade:0.14, green:0.16, temp:0.12, aq:0.12, amenities:0.10 };
const clamp=(x,a=0,b=100)=>Math.max(a,Math.min(b,x));
function f2s(key,val){ if(key==='noise'||key==='crowd') return 100 - val; if(key==='temp') return clamp(100 - Math.abs(val-60)*1.2); if(key==='aq') return clamp(100 - val); return val; }
const compute=(v)=>Math.round( WEIGHTS.noise*f2s('noise',v.noise)+WEIGHTS.crowd*f2s('crowd',v.crowd)+WEIGHTS.shade*f2s('shade',v.shade)+WEIGHTS.green*f2s('green',v.green)+WEIGHTS.temp*f2s('temp',v.temp)+WEIGHTS.aq*f2s('aq',v.aq)+WEIGHTS.amenities*f2s('amenities',v.amenities) );
const bucket=(s)=> s>=75?['Great','great']: s>=60?['Good','good']: s>=45?['Fair','fair']:['Poor','poor'];
const two=(h)=>('0'+h).slice(-2);
function seedRand(seed){let h=2166136261>>>0;for(let i=0;i<seed.length;i++){h^=seed.charCodeAt(i);h=(h*16777619)>>>0;}return ()=>{h+=0x6D2B79F5;let t=Math.imul(h^h>>>15,1|h);t^=t+Math.imul(t^t>>>7,61|t);return ((t^t>>>14)>>>0)/4294967296;};}
const locSeed=(document.body.getAttribute("data-location")||"loc")+new Date().toISOString().slice(0,10);
const rand=seedRand(locSeed);
const RAIN = (document.body.getAttribute('data-rain')==='true');
const AQ = parseInt(document.body.getAttribute('data-aq')||'50',10);
const AMEN = parseInt(document.body.getAttribute('data-amenities')||'50',10);
const DEFAULTS = { noise:+noise.value, crowd:+crowd.value, shade:+shade.value, green:+green.value, temp:+temp.value, aq:AQ, amenities:AMEN };
function baseHour(h){ const L=(h>=12&&h<=14)?1:0, P=(h>=17&&h<=19)?1:0, N=(h>=21||h<=6)?1:0; return { noise:DEFAULTS.noise+10*L+6*P-8*N, crowd:DEFAULTS.crowd+15*L+8*P-12*N, shade:DEFAULTS.shade, green:DEFAULTS.green, temp:DEFAULTS.temp, aq:DEFAULTS.aq, amenities:DEFAULTS.amenities };}
function eveningAuto(v,h){ v={...v}; if(h>=19||h<=6){ v.crowd=clamp(v.crowd-15); v.noise=clamp(v.noise-10); } return v; }
const now=new Date(); const hr=now.getHours(); const predNow=eveningAuto(baseHour(hr),hr); const predictedScore=compute(predNow);
function yTicks(svg){ const wrap=svg.parentElement.querySelector('.yTicks'); wrap.innerHTML=''; [0,25,50,75,100].forEach(v=>{ const s=document.createElement('span'); s.textContent=v; s.style.top=(10+(220-10-20)*(1-v/100))+'px'; wrap.appendChild(s); }); }
function xTicks(el,hours){ el.innerHTML=''; hours.forEach((d,i)=>{ const t=document.createElement('div'); t.className='tick'; t.textContent=(i%3===0)?two(d.getHours()):''; el.appendChild(t); }); }
function dB(n){ return Math.round(50 + (n-50)*0.6); }
function tempC(t){ return Math.round((t-50)/2 + 20); }
function fillAssumptions(){ const rows=[ "Noise level: ≈ "+dB(predNow.noise)+" dB (proxy)", "Air quality index: "+predNow.aq+" / 100", "Crowd density index: "+Math.round(predNow.crowd)+" / 100", "Shade / microclimate: "+Math.round(predNow.shade)+" / 100", "Greenery: "+Math.round(predNow.green)+" / 100", "Thermal comfort proxy: "+predNow.temp+" → ≈ "+tempC(predNow.temp)+"°C", "Amenities (seating, cover, water): "+Math.round(predNow.amenities)+" / 100" ]; document.getElementById('assumptionRows').innerHTML = rows.join("<br>"); }
function fillBreakdown(user){ const items=[ ['Noise', f2s('noise',predNow.noise), f2s('noise',user.noise), "≈ "+dB(predNow.noise)+" dB", "≈ "+dB(user.noise)+" dB"], ['Air quality', f2s('aq',predNow.aq), f2s('aq',user.aq), predNow.aq+"/100", user.aq+"/100"], ['Crowd', f2s('crowd',predNow.crowd), f2s('crowd',user.crowd), predNow.crowd+"/100", user.crowd+"/100"], ['Shade', f2s('shade',predNow.shade), f2s('shade',user.shade), predNow.shade+"/100", user.shade+"/100"], ['Greenery', f2s('green',predNow.green), f2s('green',user.green), predNow.green+"/100", user.green+"/100"], ['Thermal comfort', f2s('temp',predNow.temp), f2s('temp',user.temp), "≈ "+tempC(predNow.temp)+"°C", "≈ "+tempC(user.temp)+"°C"], ['Amenities', f2s('amenities',predNow.amenities), f2s('amenities',user.amenities), predNow.amenities+"/100", user.amenities+"/100"] ]; document.getElementById('breakdownRows').innerHTML = items.map(([k,p,u,ph,uh])=>`${k} — Predicted: ${Math.round(p)} / 100 (${ph}) • Yours: ${Math.round(u)} / 100 (${uh})`).join("<br>"); }
function oneLineTop(){ const txt = oneLineGuidance(predNow, RAIN, predNow.aq); document.getElementById('guidanceText').textContent = txt.charAt(0).toUpperCase()+txt.slice(1); }
function drawChartOnce(){ const hours=Array.from({length:24},(_,i)=>new Date(now.getTime()+i*3600*1000)); const pts=hours.map((d,i)=>{ const h=d.getHours(); const s=compute(eveningAuto(baseHour(h),h)); const x=30+(i*(1000-30-10)/23); const y=10+(220-10-20)*(1-s/100); return x+','+y; }); document.getElementById('line').setAttribute('points', pts.join(' ')); xTicks(document.getElementById('chartLabels'), hours); yTicks(document.getElementById('chart')); }
function renderPredicted(){ const [lab,cls]=bucket(predictedScore); const badge=document.getElementById('statusBadge'); badge.className='badge '+cls; document.getElementById('statusLabel').textContent=lab; document.getElementById('statusScore').textContent=predictedScore+' / 100'; const row=document.getElementById('chipRow'); row.innerHTML=''; keywordsFrom(predNow).forEach(t=>{ const c=document.createElement('span'); c.className='chip'; c.textContent=t; row.appendChild(c); }); oneLineTop(); fillAssumptions(); drawChartOnce(); }
function updateAdjusted(){ const user={ noise:+noise.value, crowd:+crowd.value, shade:+shade.value, green:+green.value, temp:+temp.value, aq:predNow.aq, amenities:predNow.amenities }; const s=compute(user); const [lab]=bucket(s); document.getElementById('userStatusLabel').textContent=lab; document.getElementById('userStatusScore').textContent=Math.round(s)+' / 100'; fillBreakdown(user); }
['noise','crowd','shade','green','temp'].forEach(id=>document.getElementById(id).addEventListener('input', updateAdjusted));
renderPredicted(); updateAdjusted();
</script>
<script src="script.js"></script>

</body></html>